<!DOCTYPE html>
<html lang="en">
<head>
    <title>Lab7</title>
</head>
<body>
    <h3 id="error"></h3>
    <form action="signup.php" method="POST">
        <!-- <input type="text" name"username" placehoolder=
         required -->
         <select id="username" name="username" placeholder="Username"
         required></select>
        <input type="password" name="password"
         placeholder="Password" required>
        <button type="button" name="signup" onclick="sign_up()">Signup</button>
    </form>
    <script> 
       function sign_up() {
        fetch('.api/signup.php',
            body=(
                'username': document.getElementById('username').value,
                'password': document.getElementById('password').value,
            )
         )
        .then((response)=>{
            if (response.status == 201) {
                location.href = 'signin.html';
            }
            else{
                response.json();
            }
        })
        .then((data)=>{
            document.getElementById('error').innerHTML
            = data['message'];
        })
    }

    fetch('./api/student-id.php')
    .then((response)=>response.json())
    .then((data)=>{
      //  console.log (data);
      let options = '';
      for (let id of data) {
        options += `<option>${id['studentID']}</option>`;
      }
      document.getElementById('username').innerHTML = options;
    });
    </script>
</body>
</html>